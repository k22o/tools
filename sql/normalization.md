# 正規化

正規化前後で情報が損失しない (正規化後の状態から前に戻せる) 正規化を、情報無損失分解と呼ぶ。また、関数従属性が保存されることを関数従属性保存と呼ぶ。
第三正規化まではこれらが保証されているが、それより先はデータによっては情報が損失してしまう。

## 用語

- 候補キー (candidate): レコードを一意に識別できる属性または属性の組み合わせで最小のもの。複数あり。
- 主キー (primary): 候補キーの中から1つ選んだもの。実際のDBで一意に識別するために利用する。
- スーパーキー: 候補キーのうち、タプルを一意に識別できるもの
- alternate key: 候補キーのうち、主キーに選ばれなかったもの。
- 複合キー: 主キーや外部キーで、複数の属性から成るもの。
- surrogate key: 複合キーを避けるため、1つの属性で一意になるようにしたもの。システム上で自動採番されるキーなど。
- 非キー属性: どの候補キーにも含まれない属性
- 外部キー (foreign): 

## 第一正規形

以下の条件を満たすものを第一正規形とよび、この状態にすることを第一正規化と呼ぶ。

- 属性がすべて単一値をとること (1つのセルには1つの要素)

## 第二正規形

以下の条件を満たすものを第二正規形と呼ぶ。
- 第一正規形であること
- すべての非キー属性が各候補キーに完全関数従属にする状態であること
  - X → Y という関数従属性がある
  - Xの真部分集合 (Xの部分集合のうちX自身をのぞく) であるX’を考える
  - X' -> Y が成り立つ場合、部分関数従属という
  - 部分関数従属がない場合を完全関数従属という

## 第三正規形

以下の条件を満たすものを第三正規形と呼ぶ。

- 第二正規形であること
- 非キー属性の候補キーに対する推移関数従属性を排除する
     - X → Y, Y → Z がなりたり、Y → X が成り立たない状態が推移関数従属 

## ボイス・コッド正規形

第二、第三では、非キーのみを対象としたが、すべての関数従属性について、部分関数従属や推移関数従属を排した状態。

## 第四正規形

多値従属性を排した状態を第四正規形と呼ぶ。

多値従属性
- 属性Xが決まったら、別の属性YやZが定まること
- 関数従属性と異なり、一意である必要はない
- X →→ Y | Z と書く

## 第五正規形

結合従属性を排した状態を第五正規形と呼ぶ。

結合従属性
- 関係が3つ以上に分解可能なもの
