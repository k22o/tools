# PKI (public key infrastructure)

PKIは、「公開鍵暗号技術の公開鍵ペアを用いて、暗号化・複合化やデジタル署名をりようするフレームワーク」。

以下の2モデルがある。

- Web Of Trustモデル
  - 公開鍵の所有者を信頼できる人物に保証してもらう仕組み
- 認証局モデル
  - 全体を主体として管理する第三者 (Trusted Third Party; TTP) を用意する

## 認証局モデル

### 公開鍵証明書 (public key certificate)

- 公開鍵とその所有者を証明するもの
- 標準フォーマットは、X509証明書

### 認証局モデルの仕組み

以下の要素で成り立つ。

- **認証局 (Certification Authority)**
  - 公開鍵とそれに紐づく秘密鍵の所有者を示す証明書を発行
  - 証明書の信頼性が失われた際にはCRL (証明書失効リスト) を発行
- **登録局 (Registration Authority)**
  - 証明書の所有者から証明書の申請が来た際に審査・確認をする
  - 認証局に証明書の発行・失効を要求する
- リポジトリ
  - 証明書や証明書失効リストを管理

近年では、外部監査を受けて認可された登録局による厳密なプロセスで作成された、**EV SSL証明書**が利用されることも多い。

### 証明書の利用形態

- **サーバ証明書**
  - サーバを識別するための証明書
  - SSL/TLSサーバが所有者
- **クライアント証明書**
  - クライアントを識別するための証明書
  - クライアントが所有者
- **ルート証明書**
  - 認証局が発行する証明書の正当性を担保するために自ら署名・発行する証明書
- **コードサイニング証明書**
  - ソフトウェアにデジタル署名を行う電子署名用の証明書

### PKIの流れ

- 証明書の発行
  - 証明書をほしい人が、鍵ペアを作成
  - Certificate Signing Request (CSR) を発行し、提出
  - 登録局が審査し、認証局で発行
- 証明書の検証
  - TBD
- 証明書の失効
  - CRL
    - 認証局が、執行された証明書を定期的に公開化する仕組み
    - リアルタイム性に欠ける
  - OCSP (Online Certification Status Protocol)
    - リアルタイムに証明書の正当性を確認する仕組み
